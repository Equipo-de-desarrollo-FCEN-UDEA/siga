<div class="container mt-5">
    <form [formGroup]="form" (submit)="search()">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-lg-8">
                <div class="row">
                    <p class="col-10">
                        <input type="text" class="form-control" formControlName="search"
                            [ngClass]="{'is-loading':(isLoading|async)}" placeholder="Buscar">
                    </p>
                    <p class="col-2">
                        <button class="btn btn-warning" type="submit" (submit)="true">
                            <i class="fas fa-search"></i>
                        </button>
                    </p>

                </div>

            </div>
            <p class="col-xs-5 col-lg-2">
                <span>
                    <select class="form-select" (change)="search()" formControlName="activo"
                        placeholder="Super usuario">
                        <option selected disabled>Estado</option>
                        <option [ngValue]="true">Activo</option>
                        <option [ngValue]="false">Inactivo</option>
                    </select>
                </span>
            </p>
            <p class="col-xs-5 col-lg-2">
                <a class="btn btn-primary" [routerLink]="['/users/crear']" type="button">
                    Registrar usuario
                </a>
            </p>
        </div>
    </form>
    <div class="table-responsive-lg">
        <table *ngIf="users$ | async as users"
            class="table table-striped table-hover table-borderless table-responsive">
            <thead>
                <tr>
                    <th>id</th>
                    <th> Nombre completo</th>
                    <th> Rol</th>
                    <th> Correo</th>
                    <th> Identificación</th>
                    <th> Departamento</th>
                    <th> Facultad </th>
                    <th> Estado</th>
                    <th> Acción</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
                <tr *ngIf="users.length==0" style="width: 100%">
                    <td colspan="7">
                        No se encontraron resultados
                    </td>
                </tr>
                <tr [routerLink]="['ver/'+user.id]" *ngFor="let user of users">
                    <th>{{user.id}}</th>
                    <td>{{user.names + ' ' + user.last_names |
                        titlecase}}
                    </td>
                    <td>{{user.rol.name}}</td>
                    <td>{{user.email | lowercase}}</td>
                    <td>{{user.identification_number | lowercase}}</td>
                    <td>{{user.department.name}}</td>
                    <td>{{user.department.school.name}}</td>
                    <td>{{user.active? 'Activo': 'Inactivo'}}</td>
                    <td>
                        <button [routerLink]="['actualizar/'+user.id]" (click)="$event.stopPropagation()"
                            class="btn btn-outline-primary btn-sm" type="button">
                            <i class="fas fa-edit"></i>
                        </button>
                        <!-- <button (click)="eliminar(user.id);$event.stopPropagation()"
                        class="button is-danger is-small is-rounded is-outlined " type="button">
                        <i class="fas fa-trash"></i>
                    </button> -->
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr style="width:100%">
                    <td colspan="7">
                        <button [disabled]="page==1" class="btn btn-outline-primary btn-sm" type="button"
                            (click)="prevPage()">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        {{page}}
                        <button [disabled]="users.length != limit" class="btn btn-outline-primary btn-sm" type="button"
                            (click)="nextPage()">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </td>
                </tr>

            </tfoot>
        </table>
    </div>

</div>